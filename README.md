# ğŸš€ Go ãƒ•ãƒ«ã‚¹ã‚¿ãƒƒã‚¯ ãƒªã‚µãƒ¼ãƒã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ

**ç´”ç²‹ãªGoã§æ§‹ç¯‰ã•ã‚ŒãŸ**ãƒãƒ«ãƒãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å¿œã®å¼·åŠ›ãªè‡ªå¾‹å‹èª¿æŸ»ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆï¼ã‚°ãƒ©ãƒ•ãƒ™ãƒ¼ã‚¹å‡¦ç†ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã€ä¸¦åˆ—æ¤œç´¢ã«ã‚ˆã‚‹åŒ…æ‹¬çš„ãªèª¿æŸ»æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚

## ğŸ¯ 3ã¤ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹

| ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ | èª¬æ˜ | é©ç”¨å ´é¢ |
|------------------|------|----------|
| ğŸ–¥ï¸ **CLIç‰ˆ** | ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ãƒ™ãƒ¼ã‚¹ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ | ãƒ‘ãƒ¯ãƒ¼ãƒ¦ãƒ¼ã‚¶ãƒ¼ã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆã€ã‚µãƒ¼ãƒãƒ¼ç’°å¢ƒ |
| ğŸŒ **Webç‰ˆ** | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚°ãƒ©ãƒ•å¯è¦–åŒ– | ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–åˆ†æã€ãƒãƒ¼ãƒ å…±åŒä½œæ¥­ |  
| âš¡ **WASMç‰ˆ** | ãƒ–ãƒ©ã‚¦ã‚¶ãƒã‚¤ãƒ†ã‚£ãƒ–Goå®Ÿè¡Œ | ã‚ªãƒ•ãƒ©ã‚¤ãƒ³åˆ©ç”¨ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰å‡¦ç† |

## âœ¨ ä¸»ãªç‰¹å¾´

- **æ„å›³ãƒ™ãƒ¼ã‚¹ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°**: ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã‚’è‡ªå‹•çš„ã«èª¿æŸ»ã€Q&Aã€é›‘è«‡ã«åˆ†é¡
- **è‡ªå¾‹çš„èª¿æŸ»**: è¤‡æ•°ã®æ¤œç´¢ã‚¯ã‚¨ãƒªã‚’ç”Ÿæˆã—ä¸¦åˆ—å®Ÿè¡Œ
- **åŒ…æ‹¬çš„ãƒ¬ãƒãƒ¼ãƒˆ**: æ¤œç´¢çµæœã‚’æ§‹é€ åŒ–ã•ã‚ŒãŸãƒ¬ãƒãƒ¼ãƒˆã«çµ±åˆ
- **ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°æ›´æ–°**: ã‚°ãƒ©ãƒ•å®Ÿè¡Œä¸­ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€²æ—è¡¨ç¤º
- **ä¸¦è¡Œå‡¦ç†**: Goã®goroutineã‚’æ´»ç”¨ã—ãŸåŠ¹ç‡çš„ãªä¸¦åˆ—æ¤œç´¢
- **å®Ÿéš›ã®Webæ¤œç´¢**: SerpAPIã«ã‚ˆã‚‹æœ¬ç‰©ã®Googleæ¤œç´¢çµæœ
- **ãƒãƒ¼ãƒ‰çŠ¶æ…‹å¯è¦–åŒ–**: Webç‰ˆã§ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å®Ÿè¡ŒçŠ¶æ…‹è¡¨ç¤º

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

LangGraphã«ã‚¤ãƒ³ã‚¹ãƒ‘ã‚¤ã‚¢ã•ã‚ŒãŸã‚°ãƒ©ãƒ•ãƒ™ãƒ¼ã‚¹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ï¼š

1. **çŠ¶æ…‹ç®¡ç†**: ã‚¹ãƒ¬ãƒƒãƒ‰ã‚»ãƒ¼ãƒ•ãª`AppState`ãŒå®Ÿè¡Œå…¨ä½“ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’ç¶­æŒ
2. **ãƒãƒ¼ãƒ‰**: å€‹åˆ¥ã®å‡¦ç†ãƒ¦ãƒ‹ãƒƒãƒˆï¼ˆæ„å›³åˆ†é¡ã€ã‚¯ã‚¨ãƒªç”Ÿæˆã€æ¤œç´¢ã€çµ±åˆï¼‰
3. **ã‚¨ãƒƒã‚¸**: çŠ¶æ…‹ã«åŸºã¥ããƒãƒ¼ãƒ‰é·ç§»ã®åˆ¶å¾¡ãƒ•ãƒ­ãƒ¼
4. **ã‚¨ãƒ³ã‚¸ãƒ³**: ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°æ›´æ–°ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã‚°ãƒ©ãƒ•å®Ÿè¡Œã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

### ã‚°ãƒ©ãƒ•ãƒ•ãƒ­ãƒ¼

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ› â†’ æ„å›³åˆ†é¡ â†’ [æ„å›³ã«åŸºã¥ãåˆ†å²]
                          â”œâ”€ èª¿æŸ» â†’ ã‚¯ã‚¨ãƒªç”Ÿæˆ â†’ ä¸¦åˆ—æ¤œç´¢ â†’ ãƒ¬ãƒãƒ¼ãƒˆçµ±åˆ
                          â”œâ”€ Q&A â†’ ç›´æ¥å›ç­”
                          â””â”€ é›‘è«‡ â†’ ãƒãƒ£ãƒƒãƒˆå‡¦ç†
```

## ğŸ“‹ å¿…è¦æ¡ä»¶

- Go 1.21ä»¥ä¸Š
- OpenAI APIã‚­ãƒ¼
- SerpAPIã‚­ãƒ¼ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ã€å®Ÿéš›ã®Webæ¤œç´¢ç”¨ï¼‰

## ğŸš€ ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

1. ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³:
```bash
git clone https://github.com/takako/openai-go-demo.git
cd openai-go-demo
```

2. ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«:
```bash
make deps
```

3. ç’°å¢ƒå¤‰æ•°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ:
```bash
cp .env.example .env
```

4. APIã‚­ãƒ¼ã‚’`.env`ã«è¿½åŠ :
```
OPENAI_API_KEY=your-openai-api-key-here
SERPAPI_KEY=your-serpapi-key-here
```

**APIã‚­ãƒ¼ã®å–å¾—:**
- OpenAI API: https://platform.openai.com/api-keys
- SerpAPIï¼ˆå®Ÿéš›ã®Googleæ¤œç´¢ç”¨ï¼‰: https://serpapi.com/manage-api-key

## ğŸ® ä½¿ç”¨æ–¹æ³•

### ã™ã¹ã¦ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ãƒ“ãƒ«ãƒ‰
```bash
make build-all
```

### 1. CLIç‰ˆã®å®Ÿè¡Œ
```bash
make build-cli
./bin/research-cli
```

### 2. Webç‰ˆã®å®Ÿè¡Œï¼ˆæ¨å¥¨ï¼ï¼‰
```bash
make serve-web
# http://localhost:8080 ã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ã
```

**Webç‰ˆã®ç‰¹å¾´:**
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒãƒ¼ãƒ‰çŠ¶æ…‹å¯è¦–åŒ–**
- **ãƒ‘ãƒ«ã‚¹åŠ¹æœä»˜ãã‚°ãƒ©ãƒ•è¡¨ç¤º**
- **WebSocketã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°**
- **LIVEå‡ºåŠ›è¡¨ç¤º**

### 3. WASMç‰ˆã®å®Ÿè¡Œ
```bash
make serve-wasm
# http://localhost:3000 ã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ã
```

**WASMç‰ˆã®ç‰¹å¾´:**
- **ãƒ–ãƒ©ã‚¦ã‚¶å†…ã§å®Œå…¨Goå®Ÿè¡Œ**
- **ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å‹•ä½œå¯èƒ½**
- **ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰å‡¦ç†**

### ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ã‚³ãƒãƒ³ãƒ‰

- èª¿æŸ»ã—ãŸã„ãƒˆãƒ”ãƒƒã‚¯ã‚’å…¥åŠ›
- `stream` - ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ãƒ¢ãƒ¼ãƒ‰ã®åˆ‡ã‚Šæ›¿ãˆ
- `exit` ã¾ãŸã¯ `quit` - ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³çµ‚äº†

### ã‚¯ã‚¨ãƒªã®ä¾‹

**èª¿æŸ»ãƒ¢ãƒ¼ãƒ‰:**
- "Goè¨€èªã®æœ€æ–°å‹•å‘ã«ã¤ã„ã¦æ•™ãˆã¦"
- "é‡å­ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã®ç¾åœ¨ã®é–‹ç™ºçŠ¶æ³ã‚’èª¿ã¹ã¦"
- "AIè¦åˆ¶ã®æœ€æ–°çŠ¶æ³ã«ã¤ã„ã¦èª¿æŸ»ã—ã¦"

**Q&Aãƒ¢ãƒ¼ãƒ‰:**
- "ãƒ•ãƒ©ãƒ³ã‚¹ã®é¦–éƒ½ã¯ï¼Ÿ"
- "goroutineã®ä»•çµ„ã¿ã¯ï¼Ÿ"

**ãƒãƒ£ãƒƒãƒˆãƒ¢ãƒ¼ãƒ‰:**
- "ã“ã‚“ã«ã¡ã¯"
- "ã‚ã‚ŠãŒã¨ã†"

## ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ

```
ğŸ“ openai-go-demo/
â”œâ”€â”€ ğŸ–¥ï¸  cmd/cli/main.go     â† CLIç‰ˆãƒ¡ã‚¤ãƒ³
â”œâ”€â”€ ğŸŒ cmd/web/main.go     â† WebSocketã‚µãƒ¼ãƒãƒ¼
â”œâ”€â”€ âš¡ cmd/wasm/main.go    â† WASMç‰ˆãƒ¡ã‚¤ãƒ³
â”œâ”€â”€ ğŸ§  graph/              â† å…±é€šãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”œâ”€â”€ state.go          â† AppStateå®šç¾©ã¨ç®¡ç†
â”‚   â”œâ”€â”€ nodes.go          â† ãƒãƒ¼ãƒ‰å®Ÿè£…
â”‚   â”œâ”€â”€ edges.go          â† ã‚¨ãƒƒã‚¸ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â””â”€â”€ engine.go         â† ã‚°ãƒ©ãƒ•å®Ÿè¡Œã‚¨ãƒ³ã‚¸ãƒ³
â”œâ”€â”€ ğŸ” tools/serpapi.go    â† SerpAPIæ¤œç´¢ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”œâ”€â”€ ğŸ¨ web/static/         â† Web UIï¼ˆã‚°ãƒ©ãƒ•å¯è¦–åŒ–ï¼‰
â”œâ”€â”€ âš¡ wasm/               â† WASM UIï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ãƒã‚¤ãƒ†ã‚£ãƒ–ï¼‰
â”œâ”€â”€ ğŸ“‹ Makefile           â† ãƒ“ãƒ«ãƒ‰ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â””â”€â”€ ğŸ“„ .env               â† ç’°å¢ƒå¤‰æ•°ï¼ˆãƒªãƒã‚¸ãƒˆãƒªã«å«ã¾ãšï¼‰
```

## ğŸ”§ ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

### AppState
ã‚¹ãƒ¬ãƒƒãƒ‰ã‚»ãƒ¼ãƒ•ãªæ“ä½œã«ã‚ˆã‚‹ãƒãƒ¼ãƒ‰é–“å…±æœ‰çŠ¶æ…‹ç®¡ç†:
- ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã¨æ„å›³åˆ†é¡
- æ¤œç´¢ã‚¯ã‚¨ãƒªã¨çµæœ
- æœ€çµ‚ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

### ãƒãƒ¼ãƒ‰
- **ClassifyIntentAndTopic**: ãƒ¦ãƒ¼ã‚¶ãƒ¼æ„å›³ã®åˆ¤å®šã¨èª¿æŸ»ãƒˆãƒ”ãƒƒã‚¯æŠ½å‡º
- **GenerateSearchQueries**: åŒ…æ‹¬çš„èª¿æŸ»ã®ãŸã‚ã®å¤šæ§˜ãªæ¤œç´¢ã‚¯ã‚¨ãƒªç”Ÿæˆ
- **ExecuteParallelSearch**: goroutineã‚’ä½¿ç”¨ã—ãŸä¸¦è¡Œæ¤œç´¢å®Ÿè¡Œ
- **SynthesizeAndReport**: çµæœã‚’æ§‹é€ åŒ–ãƒ¬ãƒãƒ¼ãƒˆã«çµ±åˆ

### ã‚¨ãƒ³ã‚¸ãƒ³
ä»¥ä¸‹ã®æ©Ÿèƒ½ã§ã‚°ãƒ©ãƒ•å®Ÿè¡Œã‚’ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³:
- ç„¡é™ãƒ«ãƒ¼ãƒ—é˜²æ­¢ã®ãŸã‚ã®æœ€å¤§ã‚¹ãƒ†ãƒƒãƒ—åˆ¶é™
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€²æ—ã®ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°æ›´æ–°
- å®Ÿè¡Œãƒ‘ã‚¹è¿½è·¡
- ã‚¨ãƒ©ãƒ¼ä¼æ’­ã¨ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

## ğŸ› ï¸ Makefileã‚³ãƒãƒ³ãƒ‰

```bash
make help          # åˆ©ç”¨å¯èƒ½ãªã‚³ãƒãƒ³ãƒ‰ä¸€è¦§
make build-all     # å…¨ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãƒ“ãƒ«ãƒ‰
make build-cli     # CLIç‰ˆãƒ“ãƒ«ãƒ‰
make build-web     # Webç‰ˆãƒ“ãƒ«ãƒ‰
make build-wasm    # WASMç‰ˆãƒ“ãƒ«ãƒ‰
make serve-web     # Webç‰ˆã‚µãƒ¼ãƒãƒ¼èµ·å‹•
make serve-wasm    # WASMç‰ˆã‚µãƒ¼ãƒãƒ¼èµ·å‹•
make demo          # ãƒ‡ãƒ¢ç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
make clean         # ãƒ“ãƒ«ãƒ‰æˆæœç‰©å‰Šé™¤
make test          # ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
```

## ğŸ¨ æ‹¡å¼µæ–¹æ³•

### æ–°ã—ã„ãƒãƒ¼ãƒ‰ã®è¿½åŠ 

1. `nodes.go`ã§ãƒãƒ¼ãƒ‰é–¢æ•°ã‚’å®šç¾©:
```go
func (r *NodeRegistry) YourNewNode(ctx context.Context, state *AppState) error {
    // ãƒãƒ¼ãƒ‰ãƒ­ã‚¸ãƒƒã‚¯
    return nil
}
```

2. `NewNodeRegistry`ã§ãƒãƒ¼ãƒ‰ã‚’ç™»éŒ²:
```go
registry.RegisterNode("your_new_node", registry.YourNewNode)
```

3. `edges.go`ã§ã‚¨ãƒƒã‚¸ãƒ­ã‚¸ãƒƒã‚¯ã‚’æ›´æ–°

### å®Ÿéš›ã®æ¤œç´¢ãƒ„ãƒ¼ãƒ«ã®è¿½åŠ 

`ExecuteParallelSearch`ã®æ¨¡æ“¬æ¤œç´¢ã‚’å®Ÿéš›ã®æ¤œç´¢APIã«ç½®æ›:
- Tavily APIï¼ˆWebæ¤œç´¢ï¼‰
- GitHub APIï¼ˆã‚³ãƒ¼ãƒ‰æ¤œç´¢ï¼‰
- arXiv APIï¼ˆå­¦è¡“è«–æ–‡æ¤œç´¢ï¼‰

## âš¡ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è€ƒæ…®äº‹é …

- **ä¸¦åˆ—å®Ÿè¡Œ**: æ¤œç´¢æ“ä½œãŒä¸¦è¡Œå®Ÿè¡Œã•ã‚Œã€ç·å®Ÿè¡Œæ™‚é–“ã‚’å¤§å¹…çŸ­ç¸®
- **ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°æ›´æ–°**: é€²æ—æ›´æ–°ãŒãƒ¡ã‚¤ãƒ³å®Ÿè¡Œã‚’ãƒ–ãƒ­ãƒƒã‚¯ã—ãªã„
- **ã‚¹ãƒ¬ãƒƒãƒ‰ã‚»ãƒ¼ãƒ•çŠ¶æ…‹**: ä¸¦è¡Œæ“ä½œãŒå…±æœ‰çŠ¶æ…‹ã‚’å®‰å…¨ã«æ›´æ–°
- **ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚­ãƒ£ãƒ³ã‚»ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³**: é©åˆ‡ãªã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã®ãŸã‚ã®å…¨æ“ä½œã§ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚µãƒãƒ¼ãƒˆ

## ğŸ”’ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯å®Ÿæ¼”ç›®çš„ã§ã™ã€‚OpenAIã®åˆ©ç”¨è¦ç´„ã‚’éµå®ˆã—ã¦ãã ã•ã„ã€‚

---

# ğŸš€ Go Full-Stack Research Assistant

A powerful autonomous research assistant built with **pure Go** across multiple platforms! Features graph-based processing, real-time streaming, and comprehensive research using parallel search operations.

## ğŸ¯ Multiple Interfaces Available

| Interface | Description | Best For |
|-----------|-------------|----------|
| ğŸ–¥ï¸ **CLI** | Terminal-based interface | Power users, scripting, server environments |
| ğŸŒ **Web** | Real-time graph visualizer | Interactive analysis, team collaboration |  
| âš¡ **WASM** | Browser-native Go execution | Offline use, client-side processing |

## âœ¨ Features

- **Intent-based Routing**: Automatically classifies user input as research requests, Q&A, or general chat
- **Autonomous Research**: Generates multiple search queries and executes them in parallel
- **Comprehensive Reports**: Synthesizes search results into well-structured research reports
- **Streaming Updates**: Real-time progress updates during graph execution
- **Concurrent Processing**: Leverages Go's goroutines for efficient parallel search operations
- **Real Web Search**: Actual Google search results via SerpAPI
- **Node State Visualization**: Real-time execution state display in Web version

## ğŸ—ï¸ Architecture

The application uses a graph-based architecture inspired by LangGraph:

1. **State Management**: Thread-safe `AppState` maintains context throughout execution
2. **Nodes**: Individual processing units (intent classification, query generation, search, synthesis)
3. **Edges**: Control flow logic that determines node transitions based on state
4. **Engine**: Orchestrates graph execution with support for streaming updates

### Graph Flow

```
User Input â†’ Classify Intent â†’ [Based on Intent]
                                â”œâ”€ Research â†’ Generate Queries â†’ Parallel Search â†’ Synthesize Report
                                â”œâ”€ Q&A â†’ Answer Directly
                                â””â”€ Chat â†’ Handle Chat
```

## ğŸ“‹ Prerequisites

- Go 1.21 or higher
- OpenAI API key
- SerpAPI key (optional, for real web search)

## ğŸš€ Installation

1. Clone the repository:
```bash
git clone https://github.com/takako/openai-go-demo.git
cd openai-go-demo
```

2. Install dependencies:
```bash
make deps
```

3. Create a `.env` file:
```bash
cp .env.example .env
```

4. Add your API keys to `.env`:
```
OPENAI_API_KEY=your-openai-api-key-here
SERPAPI_KEY=your-serpapi-key-here
```

**Getting API Keys:**
- OpenAI API: https://platform.openai.com/api-keys
- SerpAPI (for real web search): https://serpapi.com/manage-api-key

## ğŸ® Usage

### Build All Versions
```bash
make build-all
```

### 1. CLI Version
```bash
make build-cli
./bin/research-cli
```

### 2. Web Version (Recommended!)
```bash
make serve-web
# Open http://localhost:8080 in browser
```

**Web Version Features:**
- **Real-time node state visualization**
- **Pulsing graph display effects**
- **WebSocket streaming**
- **LIVE output display**

### 3. WASM Version
```bash
make serve-wasm
# Open http://localhost:3000 in browser
```

**WASM Version Features:**
- **Complete Go execution in browser**
- **Offline operation capability**
- **Client-side processing**

### Interactive Commands

- Type your query or research topic
- `stream` - Toggle streaming mode for real-time updates
- `exit` or `quit` - Exit the application

### Example Queries

**Research Mode:**
- "Research the latest developments in quantum computing"
- "Tell me about WebAssembly support in Go"
- "Investigate the current state of AI regulation"

**Q&A Mode:**
- "What is the capital of France?"
- "How do goroutines work?"

**Chat Mode:**
- "Hello, how are you?"
- "Thanks for your help!"

## ğŸ“ Project Structure

```
ğŸ“ openai-go-demo/
â”œâ”€â”€ ğŸ–¥ï¸  cmd/cli/main.go     â† CLI version main
â”œâ”€â”€ ğŸŒ cmd/web/main.go     â† WebSocket server
â”œâ”€â”€ âš¡ cmd/wasm/main.go    â† WASM version main
â”œâ”€â”€ ğŸ§  graph/              â† Common logic
â”‚   â”œâ”€â”€ state.go          â† AppState definition and management
â”‚   â”œâ”€â”€ nodes.go          â† Node implementations
â”‚   â”œâ”€â”€ edges.go          â† Edge logic for transitions
â”‚   â””â”€â”€ engine.go         â† Graph execution engine
â”œâ”€â”€ ğŸ” tools/serpapi.go    â† SerpAPI search client
â”œâ”€â”€ ğŸ¨ web/static/         â† Web UI (graph visualization)
â”œâ”€â”€ âš¡ wasm/               â† WASM UI (browser native)
â”œâ”€â”€ ğŸ“‹ Makefile           â† Build scripts
â””â”€â”€ ğŸ“„ .env               â† Environment variables (not in repo)
```

## ğŸ”§ Key Components

### AppState
Manages the shared state across all nodes with thread-safe operations:
- User input and intent classification
- Search queries and results
- Final report generation
- Error handling

### Nodes
- **ClassifyIntentAndTopic**: Determines user intent and extracts research topics
- **GenerateSearchQueries**: Creates diverse search queries for comprehensive research
- **ExecuteParallelSearch**: Performs concurrent searches using goroutines
- **SynthesizeAndReport**: Combines results into structured reports

### Engine
Orchestrates graph execution with features:
- Maximum step limit to prevent infinite loops
- Streaming updates for real-time progress
- Execution path tracking
- Error propagation and handling

## ğŸ› ï¸ Makefile Commands

```bash
make help          # Show available commands
make build-all     # Build all versions
make build-cli     # Build CLI version
make build-web     # Build Web version
make build-wasm    # Build WASM version
make serve-web     # Start Web server
make serve-wasm    # Start WASM server
make demo          # Setup demo environment
make clean         # Clean build artifacts
make test          # Run tests
```

## ğŸ¨ Extending the Application

### Adding New Nodes

1. Define the node function in `nodes.go`:
```go
func (r *NodeRegistry) YourNewNode(ctx context.Context, state *AppState) error {
    // Your node logic
    return nil
}
```

2. Register the node in `NewNodeRegistry`:
```go
registry.RegisterNode("your_new_node", registry.YourNewNode)
```

3. Update edge logic in `edges.go` to route to your node

### Adding Real Search Tools

Replace the simulated search in `ExecuteParallelSearch` with actual search APIs:
- Tavily API for web search
- GitHub API for code search
- arXiv API for academic papers

## âš¡ Performance Considerations

- **Parallel Execution**: Search operations run concurrently, significantly reducing total execution time
- **Streaming Updates**: Progress updates don't block main execution
- **Thread-Safe State**: Concurrent operations safely update shared state
- **Context Cancellation**: All operations support context for proper cleanup

## ğŸ”’ License

This project is for demonstration purposes. Please ensure you comply with OpenAI's usage policies.